<!DOCTYPE HTML>
<html>
    <head>
    <link rel="stylesheet" type="text/css" href="http://cdn.webix.com/edge/webix.css">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    
    <style type="text/css">
      html, body {
        height: 100%;
        padding:0;
        margin:0;
        overflow:hidden;
        background: url("Images/pexels-photo.jpg") no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
      }
    </style>
    
    </head>
    <body>
      <span class="fa fa-search" onclick='$$("s1").setValue("");$$("resultSearch").clearAll();$$("resultBig").clearAll();$$("my_win").show();'></span>
      
      <div id="dataA"></div>
      <div id="item_tpl" style="display:none;">
        <div style="font-size: x-small;">
          <div style="float:left;">
            <img src="#poster_path#"/>
          </div>
          <div style="float:right; margin: -24px 0px 0px 0px;">
            <p>(#media_type#)</p>
          </div>
          <div style="margin: 5px 0px 0px 100px;">
            <div class="webix_strong">#title#</div>
            <ul style="list-style-type:none; margin: 50px 0px 0px -35px;" >
              <li> Release date: #release_date#</li>
              <li>Popularity: #popularity#</li>
            </ul>
          </div>
        </div>
      </div>
      
      
      <div id="item_big" style="display:none; text-align: center;">
        <div class="webix_strong" style="text-align: center;">#title#</div>
        <div style="float:left; margin: 5px 0px 0px 10px;">
          <img src="#poster_path_Big#"/>
        </div>
        <div style="margin:20px 0px 0px 210px; font-size:x-small;">#overview#</div>
        <div class="webix_icon" style="text-align:center; position:absolute; bottom:0; margin:0px 0px 20px 0px;">
          <button>
            <span class="text"><i class="fa fa-check">OK</i></span>
          </button>
        </div>
      </div>
      
      <script type="text/javascript" src="/socket.io/socket.io.js"></script>
      <script type="text/javascript" src="http://cdn.webix.com/edge/webix.js"></script>
      <script type="text/javascript" src="/Javascript/moment/moment.js"></script>
      <script type="text/javascript" src="/Javascript/selectMovie.js"></script>
      <script type="text/javascript" charset="utf-8">
        webix.ready(function(){
          
          var data_Tree = [
            { id: "1", value: "Book 1", data: [
              { id: "1.1", value: "Part 1" },
              { id: "1.2", value: "Part 2" }
            ]},
            { id: "2", value: "Book 2", data: [
              { id: "2.1", value: "Part 1" }
            ]}
          ];
          
          var tree = {
            view: 'tree',
            width: 250,
            data: data_Tree
          };
          
          var grid = {
            id : 'grid',
            view: 'datatable',
            scroll: 'y',
            select:true,
            width: 900,
            onContext: {},
            columns: [
              { id: 'name', header: ['Nom'], fillspace: true },
              { id: 'date', header: ['Date'], fillspace: 0.3 },
              { id: 'type', header: ['Type'] },
              { id: 'size', header: ['Taille'] }
            ],
            data: [
              { name: "The Shawshank Redemption", date: getDate(), type: 'Video File', size: getSize(5561234053) },
					    { name: "The Godfather", date: getDate(), type: 'Video File', size: getSize(120934453) }
            ]
          };
          
          webix.ui({
            id: 'contextMenuOnData',
            view: 'contextmenu',
            data:[
              { value: 'Copy' },
              { value: 'Cut' },
              { value: 'Paste' },
              { value: 'Crate Folder' },
              { value: 'Delete' },
              { value: 'Rename' },
              { value: 'Upload' }
            ]
          });
          
          webix.ui({
            id: 'contextMenu',
            view: 'contextmenu',
            data:[
              { value: 'Paste' },
              { value: 'Create Folder' },
              { value: 'Upload' }
            ],
            // master: 'grid'
          });
          
          var mainWindow = webix.ui({
            view: "window",
            id: "mainWindow",
            height: 500,
            // autoheight: true,
            minWidth: 400,
            autowidth: true,
            move: true,
            resize: true,
            // modal:true,
            animate:{type:"flip", subtype:"vertical"},
            head: {
              cols: [
                {
                  view: 'template',
                  template: 'Explorer'
                },
                { 
                  view:"button",
                  type: "htmlbutton",
                  css: 'webix_icon_button',
                  label: '<span class="fa fa-close"></span>',
                  autowidth:true,
                  click:('$$("mainWindow").hide();')
                }
              ]
            },
            body: {
              cols:[
                tree,
                grid
              ]
            }
          });
          
          $$('contextMenuOnData').attachTo($$('grid'));
          
          mainWindow.show();
          
          
          function getDate() {
            return moment().format('DD/MM/YYYY HH:mm');
          }
          
          function getSize(size) {
            var tabSize = ['o', 'Ko', 'Mo', 'Go', 'To'];
            var divisor = 1024;
            var i = 0;
            
            while (size > divisor) {
              size /= divisor;
              i++;
            }
            
            return size.toFixed(3) + tabSize[i];
          }
          
        });
      </script>
    </body>
</html>